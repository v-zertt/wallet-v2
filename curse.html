<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Galaxy Wallet | –ö—É—Ä—Å–∏ –í–∞–ª—é—Ç</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #1a202c;
            color: #e2e8f0;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center; /* –¶–µ–Ω—Ç—Ä—É–≤–∞–Ω–Ω—è –≤–º—ñ—Å—Ç—É */
            padding: 20px;
            box-sizing: border-box;
            padding-bottom: 80px;
            overflow-x: hidden;
            overflow-y: auto;
        }

        /* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —Ü–µ–Ω—Ç—Ä—É–≤–∞–Ω–Ω—è –∫–∞—Ä—Ç–æ–∫ */
        .main-content {
            width: 100%;
            max-width: 450px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .currency-card {
            background: linear-gradient(135deg, #4c51bf, #667eea);
            border-radius: 1.5rem;
            padding: 2rem;
            width: 100%;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.4);
            position: relative;
            overflow: hidden;
            color: white;
            text-align: center;
            z-index: 1;
            margin-bottom: 20px;
        }

        .currency-card::before {
            content: '';
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 1000 500' xmlns='http://www.w3.org/2000/svg'%3E%3Cdefs%3E%3ClinearGradient id='gradient' x1='0%25' y1='0%25' x2='0%25' y2='100%25'%3E%3Cstop offset='0%25' stop-color='%234c51bf' stop-opacity='0.1'/%3E%3Cstop offset='100%25' stop-color='%23667eea' stop-opacity='0.1'/%3E%3C/linearGradient%3E%3C/defs%3E%3Cpath fill='url(%23gradient)' d='M0,350 L0,500 L1000,500 L1000,300 C800,400 600,250 400,350 C200,450 100,300 0,350 Z'/%3E%3Cpath fill='url(%23gradient)' d='M0,400 L0,500 L1000,500 L1000,350 C800,450 600,300 400,400 C200,500 100,350 0,400 Z'/%3E%3C/svg%3E");
            background-size: cover;
            background-position: center bottom;
            background-repeat: no-repeat;
            opacity: 0.2;
            z-index: 0;
        }

        .currency-table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0 10px;
            position: relative;
            z-index: 1;
            table-layout: fixed; /* –©–æ–± —Ç–∞–±–ª–∏—Ü—è –Ω–µ —Å–º–∏–∫–∞–ª–∞—Å—è –ø—Ä–∏ –∑–º—ñ–Ω—ñ —á–∏—Å–µ–ª */
        }

        .currency-table th, .currency-table td {
            padding: 0.75rem 0.5rem;
            text-align: left;
            overflow: hidden;
        }

        /* –í–∏—Ä—ñ–≤–Ω—é–≤–∞–Ω–Ω—è –∫–æ–ª–æ–Ω–æ–∫ */
        .currency-table th:nth-child(1), .currency-table td:nth-child(1) { width: 40%; }
        .currency-table th:nth-child(2), .currency-table td:nth-child(2) { width: 30%; text-align: center; }
        .currency-table th:nth-child(3), .currency-table td:nth-child(3) { width: 30%; text-align: center; }

        .currency-table th {
            background-color: rgba(0, 0, 0, 0.2);
            font-weight: bold;
            text-transform: uppercase;
            font-size: 0.8rem;
            letter-spacing: 0.05em;
        }

        .currency-table td { background-color: rgba(255, 255, 255, 0.1); }
        .currency-table tbody td:first-child { border-radius: 0.75rem 0 0 0.75rem; }
        .currency-table tbody td:last-child { border-radius: 0 0.75rem 0.75rem 0; }

        /* –°—Ç–∏–ª—ñ –ë–£–†–ì–ï–† –ú–ï–ù–Æ (—è–∫ —É –≤–∞—à–æ–º—É –æ—Ä–∏–≥—ñ–Ω–∞–ª—ñ) */
        .header-bar {
            width: 100%;
            max-width: 450px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 0;
            margin-bottom: 1.5rem;
        }

        .sidebar {
            position: fixed;
            top: 0; left: -100%; width: 100%; height: 100%;
            background-color: #1f2937;
            z-index: 1500;
            transition: left 0.3s ease-in-out;
            box-shadow: 2px 0 10px rgba(0, 0, 0, 0.5);
            padding: 20px;
            box-sizing: border-box;
            display: flex;
            flex-direction: column;
            max-width: 400px;
        }
        .sidebar.active { left: 0; }
        .sidebar-overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 1400;
            opacity: 0; visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }
        .sidebar-overlay.active { opacity: 1; visibility: visible; }
        .sidebar-header {
            display: flex; justify-content: space-between; align-items: center;
            margin-bottom: 30px; padding-bottom: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        .sidebar-close-button { background: none; border: none; color: #e2e8f0; font-size: 1.8rem; cursor: pointer; }
        .sidebar-user-avatar {
            width: 50px; height: 50px; background-color: rgba(255, 255, 255, 0.2);
            border-radius: 50%; display: flex; justify-content: center; align-items: center;
            margin-right: 10px; font-weight: bold; overflow: hidden;
        }
        .sidebar-user-avatar img { width: 100%; height: 100%; object-fit: cover; }
        .sidebar-username { font-size: 1.2rem; font-weight: bold; color: #e2e8f0; }
        .sidebar-vip-status { font-size: 0.8rem; color: #a0aec0; }
        .sidebar-nav-link {
            display: flex; align-items: center; padding: 12px 15px; border-radius: 0.5rem;
            color: #a0aec0; text-decoration: none; transition: 0.2s;
        }
        .sidebar-nav-link:hover { background-color: #374151; color: #e2e8f0; }
        .sidebar-nav-link i { margin-right: 15px; font-size: 1.2rem; }
        .sidebar-logout button {
            background-color: #dc2626; color: white; width: 100%; padding: 12px 15px;
            border-radius: 0.5rem; font-weight: bold; cursor: pointer; margin-top: 20px;
        }

        /* –ê–Ω—ñ–º–∞—Ü—ñ—è –∫—É—Ä—Å–æ—Ä—É */
        .cursor-particle {
            position: fixed; pointer-events: none; background: #fff;
            border-radius: 50%; z-index: 9999; animation: fadeOut 1s forwards;
        }
        @keyframes fadeOut { 0% { opacity: 1; transform: scale(1); } 100% { opacity: 0; transform: scale(0); } }

        /* –î–æ–∫-–ø–∞–Ω–µ–ª—å */
        .bottom-nav-bar {
            position: fixed; bottom: 0; left: 50%; transform: translateX(-50%);
            width: 100%; max-width: 450px; background-color: #2d3748;
            display: flex; justify-content: space-around; align-items: center;
            height: 70px; border-top-left-radius: 1rem; border-top-right-radius: 1rem;
            box-shadow: 0 -4px 6px rgba(0, 0, 0, 0.2); z-index: 999;
        }
        .bottom-nav-item { display: flex; flex-direction: column; align-items: center; color: #a0aec0; text-decoration: none; font-size: 0.8rem; flex: 1; }
        .bottom-nav-item.active { color: #6366f1; }
        .bottom-nav-item i { font-size: 1.5rem; margin-bottom: 2px; }
    </style>
</head>
<body>

    <header class="header-bar">
        <button id="menuButton" class="text-2xl text-gray-300">
            <i class="fas fa-bars"></i>
        </button>
    </header>

    <aside id="sidebar" class="sidebar">
        <div class="sidebar-header">
            <div class="sidebar-user-info flex items-center">
                <div class="sidebar-user-avatar" id="sidebarUserAvatar"></div>
                <div class="sidebar-user-details flex flex-col">
                    <span class="sidebar-username" id="sidebarUsername">User Name</span>
                    <span class="sidebar-vip-status">VIP 0 - Validity Period: Permanent</span>
                </div>
            </div>
            <button id="closeSidebarButton" class="sidebar-close-button"><i class="fas fa-times"></i></button>
        </div>
        <nav class="flex-grow">
            <ul class="space-y-2">
                <li><a href="profil.html" class="sidebar-nav-link"><i class="fas fa-home"></i> Home</a></li>
                <li><a href="login.html" class="sidebar-nav-link"><i class="fas fa-user"></i> Account</a></li>
                <li><a href="#" class="sidebar-nav-link"><i class="fas fa-wallet"></i> Wallet address</a></li>
                <li><a href="#" class="sidebar-nav-link"><i class="fas fa-book"></i> Direction for use</a></li>
                <li><a href="#" class="sidebar-nav-link"><i class="fas fa-question-circle"></i> FAQ</a></li>
                <li><a href="#" class="sidebar-nav-link"><i class="fas fa-comment-dots"></i> Feedback</a></li>
            </ul>
        </nav>
        <div class="sidebar-logout">
            <button id="logoutButton"><i class="fas fa-sign-out-alt mr-2"></i> Log out</button>
        </div>
    </aside>
    <div id="sidebarOverlay" class="sidebar-overlay"></div>

    <div class="main-content">
        <div class="currency-card">
            <h1 class="text-2xl font-bold mb-6">–ü–æ–ø—É–ª—è—Ä–Ω—ñ –í–∞–ª—é—Ç–∏</h1>
            <div id="loadingPopular">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</div>
            <table class="currency-table hidden" id="popularCurrencyTable">
                <thead>
                    <tr><th>–í–∞–ª—é—Ç–∞</th><th>–ö—É–ø—ñ–≤–ª—è</th><th>–ü—Ä–æ–¥–∞–∂</th></tr>
                </thead>
                <tbody id="popularCurrencyTableBody"></tbody>
            </table>
        </div>

        <div class="currency-card">
            <h1 class="text-2xl font-bold mb-6">–Ü–Ω—à—ñ –í–∞–ª—é—Ç–∏</h1>
            <div id="loadingOther">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</div>
            <table class="currency-table hidden" id="otherCurrencyTable">
                <thead>
                    <tr><th>–í–∞–ª—é—Ç–∞</th><th>–ö—É–ø—ñ–≤–ª—è</th><th>–ü—Ä–æ–¥–∞–∂</th></tr>
                </thead>
                <tbody id="otherCurrencyTableBody"></tbody>
            </table>
        </div>
    </div>

    <nav class="bottom-nav-bar">
        <a href="profil.html" class="bottom-nav-item"><i class="fas fa-home"></i><span>–ì–æ–ª–æ–≤–Ω–∞</span></a>
        <a href="analytics.html" class="bottom-nav-item"><i class="fas fa-chart-line"></i><span>–ê–Ω–∞–ª—ñ—Ç–∏–∫–∞</span></a>
        <a href="curse.html" class="bottom-nav-item active"><i class="fas fa-coins"></i><span>–ö—É—Ä—Å–∏</span></a>
        <a href="banka.html" class="bottom-nav-item"><i class="fas fa-jar"></i><span>–ë–∞–Ω–∫–∞</span></a>
    </nav>

    <script>
        // --- –§–£–ù–ö–¶–Ü–Ø –ê–ù–Ü–ú–ê–¶–Ü–á –ß–ò–°–ï–õ ---
        function animateValue(obj, start, end, duration) {
            let startTimestamp = null;
            const step = (timestamp) => {
                if (!startTimestamp) startTimestamp = timestamp;
                const progress = Math.min((timestamp - startTimestamp) / duration, 1);
                obj.innerHTML = (progress * (end - start) + start).toFixed(2);
                if (progress < 1) window.requestAnimationFrame(step);
            };
            window.requestAnimationFrame(step);
        }

        // --- –î–ê–ù–Ü –¢–ê API ---
        const API_KEY = '4492baa1b3293239a4f6af3f'; 
        const flagMap = { 'USD': 'üá∫üá∏', 'EUR': 'üá™üá∫', 'PLN': 'üáµüá±', 'GBP': 'üá¨üáß', 'HUF': 'üá≠üá∫', 'TRY': 'üáπüá∑', 'CZK': 'üá®üáø', 'DKK': 'üá©üá∞', 'CAD': 'üá®üá¶', 'CHF': 'üá®üá≠' };
        const nameMap = { 'USD': '–î–æ–ª–∞—Ä', 'EUR': '–Ñ–≤—Ä–æ', 'PLN': '–ó–ª–æ—Ç–∏–π', 'GBP': '–§—É–Ω—Ç', 'HUF': '–§–æ—Ä–∏–Ω—Ç', 'TRY': '–õ—ñ—Ä–∞', 'CZK': '–ö—Ä–æ–Ω–∞', 'DKK': '–ö—Ä–æ–Ω–∞', 'CAD': '–î–æ–ª–∞—Ä', 'CHF': '–§—Ä–∞–Ω–∫' };

        async function fetchCurrencyRates() {
            try {
                const response = await fetch(`https://v6.exchangerate-api.com/v6/${API_KEY}/latest/USD`);
                const data = await response.json();
                const uahRate = data.conversion_rates['UAH'];
                
                const popular = ['USD', 'EUR'];
                const other = ['PLN', 'GBP', 'TRY', 'CHF', 'CAD', 'CZK'];

                renderRows('popularCurrencyTableBody', popular, data.conversion_rates, uahRate);
                renderRows('otherCurrencyTableBody', other, data.conversion_rates, uahRate);

                document.getElementById('loadingPopular').classList.add('hidden');
                document.getElementById('popularCurrencyTable').classList.remove('hidden');
                document.getElementById('loadingOther').classList.add('hidden');
                document.getElementById('otherCurrencyTable').classList.remove('hidden');
            } catch (e) { console.error(e); }
        }

        function renderRows(id, list, rates, uah) {
            const body = document.getElementById(id);
            body.innerHTML = '';
            list.forEach((ccy, i) => {
                let base = ccy === 'USD' ? uah : (1 / rates[ccy]) * uah;
                let buy = (base * 0.995).toFixed(2);
                let sale = (base * 1.005).toFixed(2);
                
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td><div class="flex flex-col"><span class="font-bold">${flagMap[ccy]} ${ccy}</span><span class="text-[10px] opacity-60">${nameMap[ccy]}</span></div></td>
                    <td id="buy-${id}-${i}" class="text-center font-mono text-green-400">0.01</td>
                    <td id="sale-${id}-${i}" class="text-center font-mono">0.01</td>
                `;
                body.appendChild(row);
                setTimeout(() => {
                    animateValue(document.getElementById(`buy-${id}-${i}`), 0.01, parseFloat(buy), 1500);
                    animateValue(document.getElementById(`sale-${id}-${i}`), 0.01, parseFloat(sale), 1500);
                }, 100);
            });
        }

        // --- –õ–û–ì–Ü–ö–ê –ú–ï–ù–Æ ---
        const menuBtn = document.getElementById('menuButton');
        const sidebar = document.getElementById('sidebar');
        const overlay = document.getElementById('sidebarOverlay');

        menuBtn.onclick = () => { sidebar.classList.add('active'); overlay.classList.add('active'); };
        document.getElementById('closeSidebarButton').onclick = overlay.onclick = () => {
            sidebar.classList.remove('active'); overlay.classList.remove('active');
        };

        // –ï—Ñ–µ–∫—Ç –∫—É—Ä—Å–æ—Ä—É
        document.addEventListener('mousemove', (e) => {
            const p = document.createElement('div');
            p.className = 'cursor-particle';
            p.style.left = e.clientX + 'px'; p.style.top = e.clientY + 'px';
            const s = Math.random() * 6 + 2; p.style.width = p.style.height = s + 'px';
            document.body.appendChild(p);
            setTimeout(() => p.remove(), 1000);
        });

        // –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
        document.addEventListener('DOMContentLoaded', () => {
            const userLogin = localStorage.getItem('currentLoggedInUserAccount');
            if (!userLogin) { window.location.href = 'login.html'; return; }

            const users = JSON.parse(localStorage.getItem('registeredUsers') || '[]');
            const user = users.find(u => u.email === userLogin || u.mobile === userLogin);
            if (user) {
                document.getElementById('sidebarUsername').textContent = user.username;
                const avatar = document.getElementById('sidebarUserAvatar');
                if (user.avatar) avatar.innerHTML = `<img src="${user.avatar}">`;
                else avatar.innerHTML = `<span class="text-xl">${user.username[0].toUpperCase()}</span>`;
            }
            fetchCurrencyRates();
        });

        document.getElementById('logoutButton').onclick = () => {
            localStorage.removeItem('currentLoggedInUserAccount');
            window.location.href = 'login.html';
        };
    </script>
</body>
</html>
